<tr id="order-{{ order.id }}">
    <td>{{ order.id }}</td>
    <td>{{ order.customer }}</td>
    <td>{{ order.totalcost }}</td>
    <td>
        <select 
            hx-post="{% url 'core:update_order_status' order.id %}" 
            hx-target="#order-{{ order.id }}" 
            hx-swap="outerHTML"
            name="paid_status"
            class="form-select form-select-sm"
            hx-trigger="change"
        >
            <option value="false" {% if not order.paid_status %}selected{% endif %}>Unpaid</option>
            <option value="true" {% if order.paid_status %}selected{% endif %}>Paid</option>
        </select>
    </td>
    <td>
        <button 
            type="button" 
            class="btn btn-sm btn-outline-danger" 
            data-bs-toggle="modal" 
            data-bs-target="#orderModal{{ order.id }}">
            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-width="2" d="M21 12c0 1.2-4.03 6-9 6s-9-4.8-9-6c0-1.2 4.03-6 9-6s9 4.8 9 6Z"/>
                <path stroke="currentColor" stroke-width="2" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
            </svg>
        </button>
    </td>
</tr>

<!-- Modal -->
<div class="modal fade" id="orderModal{{ order.id }}" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      
      <div class="modal-header">
        <h5 class="modal-title">Order #{{ order.id }} - {{ order.customer }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <div class="modal-body">
        <p><strong>Total:</strong> Ksh. {{ order.totalcost }}</p>
        <p><strong>Payment Mode:</strong> {{ order.mode_payment }}</p>
        <p><strong>Status:</strong> 
          {% if order.paid_status %}
            <span class="badge bg-success">Paid</span>
          {% else %}
            <span class="badge bg-danger">Unpaid</span>
          {% endif %}
        </p>

        <hr>
        <h6>Items</h6>
        <ul class="list-group">
          {% for item in order.items.all %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              {{ item.product.title }}
              <span class="badge bg-secondary">{{ item.qty }} Ã— Ksh.{{ item.price }}</span>
            </li>
          {% endfor %}
        </ul>

        {% if order.comment %}
          <hr>
          <p><strong>Comment:</strong> {{ order.comment }}</p>
        {% endif %}
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
      
    </div>
  </div>
</div>
